<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Macos on Alejandro López Parra</title>
    <link>http://www.alejandrolopezparra.es/tags/macos/</link>
    <description>Recent content in Macos on Alejandro López Parra</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es-es</language>
    <copyright>&amp;copy; 2017 Alejandro López Parra</copyright>
    <lastBuildDate>Sat, 22 Apr 2017 13:33:10 +0200</lastBuildDate>
    <atom:link href="/tags/macos/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>DNI electrónico y certificados digitales</title>
      <link>http://www.alejandrolopezparra.es/post/dnie/</link>
      <pubDate>Sat, 22 Apr 2017 13:33:10 +0200</pubDate>
      
      <guid>http://www.alejandrolopezparra.es/post/dnie/</guid>
      <description>

&lt;p&gt;El &lt;a href=&#34;https://www.dnielectronico.es&#34; target=&#34;_blank&#34;&gt;Documento Nacional de Identidad electrónico español (&lt;em&gt;DNIe&lt;/em&gt;)&lt;/a&gt; es emitido por la Dirección General de la Policía (&lt;em&gt;DGP&lt;/em&gt;) y responde a la necesidad de otorgar identidad personal a los ciudadanos españoles para su uso en la &lt;a href=&#34;https://es.wikipedia.org/wiki/Sociedad_de_la_informaci%C3%B3n&#34; target=&#34;_blank&#34;&gt;Sociedad de la Información&lt;/a&gt;. Permite acreditar la identidad de los intervinientes en las comunicaciones electrónicas así como asegurar su procedencia e integridad. De este modo, es posible realizar &lt;strong&gt;gestiones de forma segura a través de Internet&lt;/strong&gt; tanto con la Administración Pública como con las entidades privadas que lo adopten.&lt;/p&gt;

&lt;p&gt;En este artículo se describirán sus principales características y algunos servicios online donde se puede usar. También se indicarán los pasos para hacerlo funcionar correctamente en el sistema operativo &lt;a href=&#34;https://es.wikipedia.org/wiki/MacOS&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;macOS&lt;/em&gt;&lt;/a&gt; de Apple.&lt;/p&gt;

&lt;h2 id=&#34;1-características-del-dnie&#34;&gt;1. Características del &lt;em&gt;DNIe&lt;/em&gt;&lt;/h2&gt;

&lt;h3 id=&#34;1-1-fundamentos-básicos&#34;&gt;1.1. Fundamentos básicos&lt;/h3&gt;

&lt;p&gt;El &lt;em&gt;DNIe&lt;/em&gt; se basa en principios matemáticos de criptografía aplicados a los sistemas de información para que éstos se puedan usar de forma segura. &lt;a href=&#34;https://es.wikipedia.org/wiki/Infraestructura_de_clave_p%C3%BAblica&#34; target=&#34;_blank&#34;&gt;Infraestructura de clave pública (PKI)&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/Certificado_digital&#34; target=&#34;_blank&#34;&gt;certificados digitales&lt;/a&gt; y &lt;a href=&#34;https://es.wikipedia.org/wiki/Criptograf%C3%ADa_asim%C3%A9trica&#34; target=&#34;_blank&#34;&gt;criptografía de clave pública o asimétrica&lt;/a&gt; son los principales. Éstos permiten garantizar características básicas de la seguridad de la información: &lt;a href=&#34;https://es.wikipedia.org/wiki/Seguridad_de_la_informaci%C3%B3n#Autenticaci.C3.B3n_o_autentificaci.C3.B3n&#34; target=&#34;_blank&#34;&gt;Autenticación&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/Seguridad_de_la_informaci%C3%B3n#Confidencialidad&#34; target=&#34;_blank&#34;&gt;Confidencialidad&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/Seguridad_de_la_informaci%C3%B3n#Disponibilidad&#34; target=&#34;_blank&#34;&gt;Disponibilidad&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/Seguridad_de_la_informaci%C3%B3n#Integridad&#34; target=&#34;_blank&#34;&gt;Integridad&lt;/a&gt; y &lt;a href=&#34;https://es.wikipedia.org/wiki/Seguridad_de_la_informaci%C3%B3n#No_repudio_o_irrefutabilidad&#34; target=&#34;_blank&#34;&gt;No repudio&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;De forma resumida, podríamos &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_103&#34; target=&#34;_blank&#34;&gt;describir el &lt;em&gt;DNIe&lt;/em&gt;&lt;/a&gt; como una &lt;a href=&#34;https://es.wikipedia.org/wiki/Tarjeta_inteligente&#34; target=&#34;_blank&#34;&gt;tarjeta inteligente o smart card&lt;/a&gt; que incorpora un chip criptográfico capaz de almacenar de forma segura la misma información que se encuentra impresa, las imágenes digitalizadas de la fotografía, firma manuscrita e impresiones dactilares. De la misma forma, contiene 2 certificados digitales denominados &lt;code&gt;AUTENTICACIÓN&lt;/code&gt; y &lt;code&gt;FIRMA&lt;/code&gt; con sus correspondientes claves privadas que están protegidas por una clave personal de acceso (&lt;em&gt;PIN&lt;/em&gt;) alfanumérica. Es importante notar que, aunque el &lt;em&gt;DNIe&lt;/em&gt; tiene una vigencia de 10 años desde el momento de su expedición, los certificados digitales almacenados internamente &lt;strong&gt;caducan a los 30 meses&lt;/strong&gt; y, por tanto, &lt;strong&gt;deben ser renovados en una comisaría de policía&lt;/strong&gt; para que sigan siendo válidos.&lt;/p&gt;

&lt;p&gt;El chip criptográfico posibilita las siguientes funciones cuando sus certificados digitales están en vigor y se conoce el &lt;em&gt;PIN&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Acreditar electrónicamente y de forma inequívoca la identidad de la persona. Es una &lt;strong&gt;Autenticación&lt;/strong&gt; de doble factor, algo que se tiene (el certificado digital &lt;code&gt;AUTENTICACIÓN&lt;/code&gt; que va dentro del &lt;em&gt;DNIe&lt;/em&gt;) y algo que se conoce (el &lt;em&gt;PIN&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;Firmar digitalmente documentos electrónicos, otorgándoles validez jurídica. Se usa el &lt;em&gt;PIN&lt;/em&gt; y el certificado digital &lt;code&gt;FIRMA&lt;/code&gt; para proporcionar &lt;strong&gt;Integridad&lt;/strong&gt; y &lt;strong&gt;No repudio&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Se pueden encontrar más detalles técnicos revisando las características &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_083&#34; target=&#34;_blank&#34;&gt;electrónicas&lt;/a&gt; y &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_084&#34; target=&#34;_blank&#34;&gt;físicas&lt;/a&gt; del &lt;em&gt;DNIe&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&#34;1-3-versiones&#34;&gt;1.3. Versiones&lt;/h3&gt;

&lt;p&gt;Existen 2 variantes distintas del &lt;em&gt;DNIe&lt;/em&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;La &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_106&#34; target=&#34;_blank&#34;&gt;primera&lt;/a&gt; apareció por primera vez en el año 2006 y dejó de expedirse en 2015.

&lt;figure &gt;
    
        &lt;img src=&#34;https://www.dnielectronico.es/img/dnie_descrip.jpg&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;DNIe&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Desde 2016 se empezó a emitir el denominado &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_103&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;DNI 3.0&lt;/em&gt;&lt;/a&gt;.

&lt;figure &gt;
    
        &lt;img src=&#34;https://www.dnielectronico.es/img/DNI_PERSPECTIVA_3.jpg&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;DNI 3.0&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ambas versiones son válidas a día de hoy pero tienen &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_038&#34; target=&#34;_blank&#34;&gt;algunas diferencias&lt;/a&gt;. La principales ventajas del &lt;em&gt;DNI 3.0&lt;/em&gt; son las siguientes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Dispone de &lt;strong&gt;mejores medidas de seguridad físicas&lt;/strong&gt; que dificultan aún más su falsificación.&lt;/li&gt;
&lt;li&gt;Permite el &lt;strong&gt;uso desde smartphones y tablets&lt;/strong&gt; a través de la tecnología de comunicación inalámbrica de corto alcance y alta frecuencia &lt;a href=&#34;https://es.wikipedia.org/wiki/Near_field_communication&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;NFC&lt;/em&gt;&lt;/a&gt;. Como medida de protección adicional, incorpora un número de autenticación de tarjeta (&lt;em&gt;Card Authentication Number&lt;/em&gt; o &lt;em&gt;CAN&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;Presenta una estructura de datos &lt;strong&gt;equivalente al pasaporte&lt;/strong&gt; que posibilita usarlo como Documento de Viaje en los países que disponen de Pasos Rápidos de Frontera (&lt;em&gt;ABC Systems&lt;/em&gt;).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;1-2-requisitos&#34;&gt;1.2. Requisitos&lt;/h3&gt;

&lt;p&gt;Para poder hacer uso del &lt;em&gt;DNIe&lt;/em&gt; es necesario cumplir algunos requisitos físicos (&lt;em&gt;hardware&lt;/em&gt;) y lógicos (&lt;em&gt;software&lt;/em&gt;):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Se debe tener alguno de los siguientes elementos &lt;em&gt;hardware&lt;/em&gt;:

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lector con contacto&lt;/strong&gt;: un lector de tarjetas inteligentes que cumpla el estándar &lt;em&gt;ISO-7816 (1/2/3)&lt;/em&gt; y sea compatible con &lt;em&gt;API PC/SC&lt;/em&gt; (&lt;em&gt;Personal Computer/Smart Card&lt;/em&gt;), &lt;em&gt;CSP&lt;/em&gt; (&lt;em&gt;Cryptographic Service Provider&lt;/em&gt; de &lt;em&gt;Microsoft&lt;/em&gt;), &lt;em&gt;API PKCS#11&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lector sin contacto&lt;/strong&gt;: un dispositivo &lt;em&gt;NFC&lt;/em&gt; cumpla el estándar &lt;em&gt;ISO 14443&lt;/em&gt;, tipo A o B. La mayoría de los &lt;em&gt;smartphones&lt;/em&gt; y &lt;em&gt;tablets&lt;/em&gt; lo son.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://www.dnielectronico.es/img/LECTORES%20PARA%20DNI_FINAL.jpg&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;Lectores DNIe&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;ul&gt;
&lt;li&gt;Elementos software necesarios:

&lt;ul&gt;
&lt;li&gt;En el caso de usar &lt;strong&gt;lectores con contacto&lt;/strong&gt;:

&lt;ul&gt;
&lt;li&gt;Sistema operativo (&lt;em&gt;Windows&lt;/em&gt;, &lt;em&gt;GNU/Linux&lt;/em&gt;, &lt;em&gt;macOS&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;Navegador (&lt;em&gt;Internet Explorer&lt;/em&gt;, &lt;em&gt;Chrome&lt;/em&gt;, &lt;em&gt;Firefox&lt;/em&gt;) con los &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_076&#34; target=&#34;_blank&#34;&gt;certificados raíz de la &lt;em&gt;DGP&lt;/em&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Controlador (driver) para el lector. Suele venir junto con el sistema operativo aunque algunos lectores necesitan uno específico creado por el fabricante.&lt;/li&gt;
&lt;li&gt;Controlador (driver) criptográfico específico para el &lt;em&gt;DNIe&lt;/em&gt;: &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_1101&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;Smart Card Mini-Driver&lt;/em&gt;&lt;/a&gt; en &lt;em&gt;Windows&lt;/em&gt; o &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_1110&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;PKCS#11&lt;/em&gt;&lt;/a&gt; en otros sistemas operativos como &lt;em&gt;GNU/Linux&lt;/em&gt; o &lt;em&gt;macOS&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;En el caso de usar &lt;strong&gt;lectores sin contacto&lt;/strong&gt;:

&lt;ul&gt;
&lt;li&gt;Sistema operativo (&lt;em&gt;Android&lt;/em&gt;, &lt;em&gt;iOS&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;Aplicación compatible con &lt;em&gt;DNI 3.0&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;2-usos-del-dnie&#34;&gt;2. Usos del &lt;em&gt;DNIe&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;Como se comentaba al principio del artículo, el &lt;em&gt;DNIe&lt;/em&gt; posibilita realizar &lt;strong&gt;gestiones de forma segura a través de Internet&lt;/strong&gt; tanto con la Administración Pública como con algunas entidades privadas que lo han adoptado.&lt;/p&gt;

&lt;p&gt;En la &lt;a href=&#34;https://www.dnielectronico.es&#34; target=&#34;_blank&#34;&gt;web del dnielectronico&lt;/a&gt; se recoge un listado exhaustivo de servicios disponibles de la &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_510&#34; target=&#34;_blank&#34;&gt;Administración General del Estado&lt;/a&gt;, &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_520&#34; target=&#34;_blank&#34;&gt;Comunidades Autónomas&lt;/a&gt;, &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_530&#34; target=&#34;_blank&#34;&gt;Administración Local&lt;/a&gt;, &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_540&#34; target=&#34;_blank&#34;&gt;otros organismos públicos&lt;/a&gt; y el &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_550&#34; target=&#34;_blank&#34;&gt;sector privado&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;De todos ellos, algunos de los más importantes son los siguientes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Servicios electrónicos de la &lt;a href=&#34;https://sede.administracion.gob.es/PAG_Sede/ServiciosElectronicos/ServiciosElectronicosAGE.html&#34; target=&#34;_blank&#34;&gt;Administración General Estado&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Sede electrónica de la &lt;a href=&#34;https://sede.seg-social.gob.es/&#34; target=&#34;_blank&#34;&gt;Seguridad Social&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Sede electrónica de la &lt;a href=&#34;https://www.agenciatributaria.gob.es/AEAT.sede/Inicio/Inicio.shtml&#34; target=&#34;_blank&#34;&gt;Agencia Tributaria&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;3-el-dnie-en-macos&#34;&gt;3. El &lt;em&gt;DNIe&lt;/em&gt; en &lt;em&gt;macOS&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;Además de disponer de un lector compatible, se necesitan completar algunos pasos para que el &lt;em&gt;DNIe&lt;/em&gt; sea reconocido y funcione correctamente en &lt;em&gt;macOS&lt;/em&gt;. Lo más recomendable es seguir las instrucciones que se describen en el &lt;a href=&#34;https://www.dnielectronico.es/PDFs/manuales_instalacion_unix/Manual_de_Instalacion_de_MulticardPKCS11_DNIE_V1.pdf&#34; target=&#34;_blank&#34;&gt;manual de instalación&lt;/a&gt; publicado por la &lt;em&gt;DGP&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&#34;3-1-instalar-firefox&#34;&gt;3.1. Instalar &lt;em&gt;Firefox&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;A día de hoy, el único navegador soportado por el &lt;em&gt;DNIe&lt;/em&gt; en &lt;em&gt;macOS&lt;/em&gt; es &lt;em&gt;Mozilla Firefox&lt;/em&gt; por lo que tendremos que descargar la versión de Escritorio desde su &lt;a href=&#34;https://www.mozilla.org/es-ES/firefox/desktop/&#34; target=&#34;_blank&#34;&gt;web oficial&lt;/a&gt; e instalarlo.&lt;/p&gt;

&lt;h3 id=&#34;3-2-driver-pcks-11&#34;&gt;3.2. Driver &lt;em&gt;PCKS#11&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;A continuación debemos instalar el driver &lt;em&gt;PKCS#11&lt;/em&gt; compatible con el &lt;em&gt;DNIe&lt;/em&gt; que se puede descargar desde el &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_1113&#34; target=&#34;_blank&#34;&gt;área de descargas&lt;/a&gt; de la web del dnielectronico.&lt;/p&gt;

&lt;p&gt;Una vez instalado el driver, se debe configurar &lt;em&gt;Firefox&lt;/em&gt; para que pueda usar el &lt;em&gt;DNIe&lt;/em&gt; con un lector:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Ir a &lt;code&gt;Firefox &amp;gt; Preferencias &amp;gt; Avanzado &amp;gt; Cifrado &amp;gt; Dispositivos de seguridad&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Seleccionar &lt;code&gt;Cargar&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Asignar un nombre al módulo, por ejemplo, &lt;em&gt;DNIe&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Indicar la ruta hacia el driver, &lt;code&gt;/Library/Libpkcs11-dnie/lib/libpkcs11-dnie.so&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Hacer clic en &lt;code&gt;Aceptar&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;3-3-instalar-los-certificados-de-la-policía&#34;&gt;3.3. Instalar los certificados de la policía&lt;/h3&gt;

&lt;p&gt;Para que &lt;em&gt;Firefox&lt;/em&gt; no dé errores de verificación es necesario instalar los &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_077&#34; target=&#34;_blank&#34;&gt;certificados de las Autoridades de Certificación raíz&lt;/a&gt; de la &lt;em&gt;DGP&lt;/em&gt; y aprobar cada uno de ellos para los siguientes usos:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Identificar páginas web&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Usuarios de correo electrónico&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Desarrolladores de aplicaciones&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Aunque no es estrictamente necesario, sí que es recomendable repetir el paso anterior con los &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_078&#34; target=&#34;_blank&#34;&gt;certificados de las Autoridades de Certificación subordinadas&lt;/a&gt; de la &lt;em&gt;DGP&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&#34;3-4-verificar-que-funciona&#34;&gt;3.4. Verificar que funciona&lt;/h3&gt;

&lt;p&gt;Una vez completados todos los pasos de instalación y preparación del sistema para el uso del &lt;em&gt;DNIe&lt;/em&gt;, es el momento de comprobar que funciona correctamente. Para ello debemos utilizar un servicio denominado &lt;em&gt;Autoridad de Validación&lt;/em&gt; y, según se indica en la &lt;a href=&#34;https://www.dnielectronico.es/PortalDNIe/PRF1_Cons02.action?pag=REF_320&#34; target=&#34;_blank&#34;&gt;sección de validación&lt;/a&gt; de la web del dnielectronico, hay 2 prestadores de servicio de validación para el &lt;em&gt;DNIe&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sede.fnmt.gob.es/certificados/persona-fisica/verificar-estado&#34; target=&#34;_blank&#34;&gt;Fábrica Nacional de Moneda y Timbre - Real Casa de la Moneda (FNMT-RCM)&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://valide.redsara.es/valide/&#34; target=&#34;_blank&#34;&gt;@FIRMA&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Estos servicios nos permitirán, además, conocer el estado de los certificados que van dentro del &lt;em&gt;DNIe&lt;/em&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Válido&lt;/code&gt;: el certificado digital no ha sido revocado ni ha expirado.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Revocado&lt;/code&gt;: el certificado digital ha sido invalidado por la &lt;em&gt;DGP&lt;/em&gt;. Esto suele ocurrir al generar un nuevo &lt;em&gt;DNIe&lt;/em&gt; o renovar sus certificados digitales.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Expirado&lt;/code&gt;: se ha superado la fecha en la que caduca el certificado digital y debería renovarse en una comisaría de policía.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;conclusiones&#34;&gt;Conclusiones&lt;/h2&gt;

&lt;p&gt;En los últimos años, a través de la &lt;a href=&#34;http://www.agendadigital.gob.es&#34; target=&#34;_blank&#34;&gt;Agenda Digital para España&lt;/a&gt;, el gobierno español está impulsando distintos planes en materia de Tecnologías de la Información y las Comunicaciones (TIC) y de Administración Electrónica para el cumplimiento de los objetivos de la Agenda Digital para Europa e incorpora objetivos específicos para el desarrollo de la economía y la sociedad digital en España.&lt;/p&gt;

&lt;p&gt;El &lt;em&gt;DNIe&lt;/em&gt; forma parte de estos planes ya que es una herramienta que permite a los ciudadanos españoles su &lt;strong&gt;identificación digital o electrónica segura&lt;/strong&gt; frente a la administración pública y las empresas privadas, posibilitando el acceso a los servicios de la &lt;a href=&#34;https://es.wikipedia.org/wiki/Sociedad_de_la_informaci%C3%B3n&#34; target=&#34;_blank&#34;&gt;Sociedad de la Información&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Aunque su uso no es todo lo sencillo que debería especialmente en equipos que no disponen de &lt;em&gt;Windows&lt;/em&gt;, una vez que se consigue que funcione correctamente, permite realizar multitud de gestiones electrónicas tanto con la Administración Pública como con el sector privado, sobre todo bancos y entidades financieras.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Generar estadísticas de websites con AWStats</title>
      <link>http://www.alejandrolopezparra.es/post/awstats/</link>
      <pubDate>Sat, 25 Mar 2017 16:39:03 +0100</pubDate>
      
      <guid>http://www.alejandrolopezparra.es/post/awstats/</guid>
      <description>

&lt;p&gt;Después del &lt;a href=&#34;http://www.alejandrolopezparra.es/post/amazon_s3_logs/&#34;&gt;anterior post&lt;/a&gt;, dedicado al registro de accesos a un website alojado en &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html&#34; target=&#34;_blank&#34;&gt;Amazon S3&lt;/a&gt; gracias a la característica &lt;a href=&#34;https://docs.aws.amazon.com/AmazonS3/latest/dev/ServerLogs.html&#34; target=&#34;_blank&#34;&gt;access logging&lt;/a&gt;, continuamos con lo realmente importante: &lt;strong&gt;el análisis de logs&lt;/strong&gt;. Esto es fundamental para obtener estadísticas de nuestro website y conocer qué uso, tanto legítimo como inapropiado, se hace de él desde Internet. Para llevarlo a cabo, se tratará la instalación, configuración y uso de la herramienta de software libre &lt;a href=&#34;http://www.awstats.org&#34; target=&#34;_blank&#34;&gt;AWStats&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;AWStats&lt;/em&gt; es un analizador de logs que genera estadísticas y gráficas en &lt;em&gt;HTML&lt;/em&gt; sobre el uso de servidores web, ftp, streaming y de correo. Éstos son algunos ejemplos de las estadísticas que es capaz de obtener a partir de los logs:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Número de visitas, de visitantes únicos y de robots.&lt;/li&gt;
&lt;li&gt;Horas y días de la semana de más uso.&lt;/li&gt;
&lt;li&gt;Países, ciudades y direcciones IP desde los que se accede.&lt;/li&gt;
&lt;li&gt;Navegadores y sistemas operativos usados por los clientes.&lt;/li&gt;
&lt;li&gt;Ranking de páginas más visitadas.&lt;/li&gt;
&lt;li&gt;Errores HTTP.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Está escrito en &lt;em&gt;Perl&lt;/em&gt; y, por tanto, disponible para múltiples sistemas operativos (&lt;a href=&#34;https://es.wikipedia.org/wiki/GNU/Linux&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;GNU/Linux&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/MacOS&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;macOS&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://es.wikipedia.org/wiki/Microsoft_Windows&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;Windows&lt;/em&gt;&lt;/a&gt;, etc.).&lt;/p&gt;

&lt;p&gt;Básicamente tiene 2 modos de funcionamiento:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Common Gateway Interface (CGI)&lt;/strong&gt;: para ser integrado con un servidor web como &lt;em&gt;Apache HTTP Server&lt;/em&gt; o &lt;em&gt;nginx&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Línea de comandos (CLI)&lt;/strong&gt;: para ser ejecutado desde un intérprete de comandos.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;En el caso que nos ocupa, se usará desde la &lt;em&gt;CLI&lt;/em&gt; y sólo para analizar logs de acceso al servidor web de &lt;em&gt;Amazon S3&lt;/em&gt;. A continuación se describen los pasos para hacerlo funcionar: (1) descargar bases de datos de geolocalización, (2) instalar &lt;em&gt;Perl&lt;/em&gt;, (3) instalar y configurar &lt;em&gt;AWStats&lt;/em&gt;, y (4) generar informes con &lt;em&gt;AWStats&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&#34;1-descargar-bases-de-datos-de-geolocalización&#34;&gt;1. Descargar bases de datos de geolocalización&lt;/h2&gt;

&lt;p&gt;El primer paso a realizar es descargar la base de datos de geolocalización que se usará para poder obtener el país, sistema autónomo (&lt;em&gt;ASN&lt;/em&gt;), organización, región y/o ciudad de cada una de las direcciones IP desde las que visiten nuestro website. &lt;em&gt;AWStats&lt;/em&gt; soporta tres proveedores de bases de datos:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://software77.net/geo-ip/&#34; target=&#34;_blank&#34;&gt;GeoIPFree&lt;/a&gt;: es gratuita y libre pero sólo proporciona base de datos para el &lt;a href=&#34;http://software77.net/geo-ip/?DL=4&#34; target=&#34;_blank&#34;&gt;país&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dev.maxmind.com/geoip/legacy/geolite/&#34; target=&#34;_blank&#34;&gt;MaxMind GeoLite&lt;/a&gt;: es gratuita y proporciona bases de datos para el &lt;a href=&#34;http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz&#34; target=&#34;_blank&#34;&gt;país&lt;/a&gt;, &lt;a href=&#34;http://download.maxmind.com/download/geoip/database/asnum/GeoIPASNum.dat.gz&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;ASN&lt;/em&gt;&lt;/a&gt; y &lt;a href=&#34;http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz&#34; target=&#34;_blank&#34;&gt;ciudad&lt;/a&gt;. Se actualizan el primer martes de cada mes.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dev.maxmind.com/geoip/legacy/&#34; target=&#34;_blank&#34;&gt;MaxMind GeoIP&lt;/a&gt;: es comercial y proporciona bases de datos para el país, &lt;em&gt;ASN&lt;/em&gt;, organización, región y ciudad. Se actualizan todas las semanas.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;En este caso, optaremos por las 3 bases de datos de &lt;em&gt;MaxMind GeoLite&lt;/em&gt; así que, una vez descargadas, será necesario descomprimirlas:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# gunzip -f GeoIP.dat.gz GeoIPASNum.dat.gz GeoLiteCity.dat.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;2-instalar-perl&#34;&gt;2. Instalar Perl&lt;/h2&gt;

&lt;p&gt;La mayoría de los sistemas operativos vienen con el intérprete de &lt;em&gt;Perl&lt;/em&gt; pre-instalado o disponen de un instalador que facilita la labor. Éste es el caso de &lt;em&gt;macOS&lt;/em&gt;, que ya cuenta con &lt;em&gt;Perl&lt;/em&gt; como parte de las utilidades que acompañan al sistema operativo así que no es necesario instalarlo.&lt;/p&gt;

&lt;p&gt;Sin embargo, además del intérprete de &lt;em&gt;Perl&lt;/em&gt;, es necesario disponer del módulo &lt;a href=&#34;http://search.cpan.org/~maxmind/Geo-IP-1.50/lib/Geo/IP.pm&#34; target=&#34;_blank&#34;&gt;Geo::IP&lt;/a&gt; de &lt;em&gt;MaxMind&lt;/em&gt; para &lt;em&gt;Perl&lt;/em&gt; de forma que &lt;em&gt;AWStats&lt;/em&gt; pueda hacer uso de sus bases de datos de geolocalización. En &lt;em&gt;macOS&lt;/em&gt; y otros sistemas operativos, es tan fácil como ejecutar el comando &lt;a href=&#34;https://metacpan.org/pod/distribution/CPAN/scripts/cpan&#34; target=&#34;_blank&#34;&gt;cpan&lt;/a&gt; que viene con &lt;em&gt;Perl&lt;/em&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# cpan Geo::IP
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Si no disponemos de permisos de root/administrador o &lt;strong&gt;por seguridad&lt;/strong&gt;, podemos ejecutarlo con un usuario sin privilegios pero, antes, hay que instalar &lt;a href=&#34;https://metacpan.org/pod/local::lib&#34; target=&#34;_blank&#34;&gt;local::lib&lt;/a&gt; (un módulo de &lt;em&gt;Perl&lt;/em&gt; que permite instalar módulos en directorios locales). Para llevarlo a cabo, lo más recomendable es usar la &lt;a href=&#34;https://metacpan.org/pod/local::lib#The-bootstrapping-technique&#34; target=&#34;_blank&#34;&gt;técnica bootstrapping&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;3-instalar-y-configurar-awstats&#34;&gt;3. Instalar y configurar AWStats&lt;/h2&gt;

&lt;p&gt;Ahora sí, una vez cubiertos todos los requisito previos, llega el momento de descargar &lt;em&gt;AWStats&lt;/em&gt; desde su &lt;a href=&#34;http://www.awstats.org/#DOWNLOAD&#34; target=&#34;_blank&#34;&gt;web oficial&lt;/a&gt; y descomprimirlo para posteriormente configurarlo según las &lt;a href=&#34;http://www.awstats.org/docs/awstats_setup.html&#34; target=&#34;_blank&#34;&gt;instrucciones oficiales&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Básicamente la configuración consiste en crear un fichero &lt;code&gt;awstats.$myserver.conf&lt;/code&gt; con todas las opciones de configuración necesarias y donde &lt;code&gt;$myserver&lt;/code&gt; es el nombre del servidor que aparecerán en los logs. Existen 2 posibilidades para llevarlo a cabo:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;El uso del script &lt;code&gt;awstats_configure.pl&lt;/code&gt;, que crea el fichero de configuración a partir de las respuestas a las preguntas que interactivamente realiza al usuario. Esta primera alternativa &lt;strong&gt;no es recomendable&lt;/strong&gt; a no ser que los logs que se pretendan analizar sean generados por un servidor web &lt;em&gt;Apache HTTP Server&lt;/em&gt; que esté instalado en la misma máquina que &lt;em&gt;AWStats&lt;/em&gt;, ya que intenta modificar directamente la configuración de dicho servidor y reiniciarlo después.&lt;/li&gt;
&lt;li&gt;A partir del fichero de configuración de ejemplo que viene &lt;code&gt;awstats.model.conf&lt;/code&gt;, copiándolo como &lt;code&gt;awstats.$myserver.conf&lt;/code&gt; y modificando las valores por defecto de las opciones.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Aunque las opciones están bien documentadas en el fichero de configuración de ejemplo y en la &lt;a href=&#34;http://www.awstats.org/docs/awstats_config.html&#34; target=&#34;_blank&#34;&gt;web oficial&lt;/a&gt;, las más importantes son las siguientes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;En el apartado &lt;em&gt;MAIN SETUP SECTION&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LogFile=&amp;quot;access.log&amp;quot;
LogFormat=&amp;quot;%other %virtualname %time1 %host %extra1 %other %extra2 %url %methodurl %code %extra3 %bytesd %other %extra4 %extra5 %refererquot %uaquot %other&amp;quot;
SiteDomain=&amp;quot;www.alejandrolopezparra.es&amp;quot;
HostAliases=&amp;quot;localhost 127.0.0.1&amp;quot;
DirIcons=&amp;quot;icon&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;En el apartado &lt;em&gt;PLUGINS&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LoadPlugin=&amp;quot;geoip GEOIP_STANDARD GeoIP.dat&amp;quot;
LoadPlugin=&amp;quot;geoip_city_maxmind GEOIP_STANDARD GeoLiteCity.dat&amp;quot;
LoadPlugin=&amp;quot;geoip_asn_maxmind GEOIP_STANDARD GeoIPASNum.dat+http://enc.com.au/itools/autnum.php?asn=&amp;quot;
LoadPlugin=&amp;quot;timezone CET&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;4-generar-informes-con-awstats&#34;&gt;4. Generar informes con AWStats&lt;/h2&gt;

&lt;p&gt;Una vez que hemos conseguido instalar y configurar todas las herramientas necesarias, es el momento de generar los informes con las estadísticas desde los logs de nuestro website.&lt;/p&gt;

&lt;p&gt;El primer paso es construir la base de datos de estadísticas para comprobar si hay algún error, con el comando:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# awstats.pl -config=$myserver -update
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Cuando esto se haya completado correctamente, ya se podrá solicitar a &lt;em&gt;AWStats&lt;/em&gt; que genere todos los informes posibles con el comando:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# awstats_buildstaticpages.pl -config=$myserver -update -month=all -configdir=$configdir -awstatsprog=$awstatsprog
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;donde&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$myserver&lt;/code&gt; es el nombre del servidor tal y como aparece en los logs.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$configdir&lt;/code&gt; es el directorio donde esté el fichero de configuración &lt;code&gt;awstats.$myserver.conf&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$awstatsprog&lt;/code&gt; es la ruta al comando &lt;code&gt;awstats.pl&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El resultado final son una serie de documentos HTML que contienen los informes general y detallados de cada una de las estadísticas que recopila &lt;em&gt;AWStats&lt;/em&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;awstats.$myserver.html
awstats.$myserver.alldomains.html
awstats.$myserver.allhosts.html
awstats.$myserver.lasthosts.html
awstats.$myserver.unknownip.html
awstats.$myserver.alllogins.html
awstats.$myserver.lastlogins.html
awstats.$myserver.allrobots.html
awstats.$myserver.lastrobots.html
awstats.$myserver.urldetail.html
awstats.$myserver.urlentry.html
awstats.$myserver.urlexit.html
awstats.$myserver.browserdetail.html
awstats.$myserver.osdetail.html
awstats.$myserver.unknownbrowser.html
awstats.$myserver.unknownos.html
awstats.$myserver.refererse.html
awstats.$myserver.refererpages.html
awstats.$myserver.keyphrases.html
awstats.$myserver.keywords.html
awstats.$myserver.errors404.html
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;conclusiones&#34;&gt;Conclusiones&lt;/h2&gt;

&lt;p&gt;Aunque &lt;em&gt;AWStats&lt;/em&gt; dispone de buena &lt;a href=&#34;http://www.awstats.org/docs/index.html&#34; target=&#34;_blank&#34;&gt;documentación oficial&lt;/a&gt;, no es nada sencillo ni intuitivo usar la herramienta por primera vez debido a la cantidad de opciones que ofrece.&lt;/p&gt;

&lt;p&gt;No obstante, una vez superada esa fase, los informes generados por esta herramienta facilitan mucho el análisis de los logs. &lt;a href=&#34;http://www.nltechno.com/awstats/awstats.pl?config=destailleur.fr&#34; target=&#34;_blank&#34;&gt;Aquí&lt;/a&gt; se puede encontrar una demonstración de las estadísticas que puede recopilar.&lt;/p&gt;

&lt;p&gt;Por supuesto, &lt;em&gt;AWStats&lt;/em&gt; no es la única alternativa para generar informes y estadísticas de nuestros logs. De hecho, la propia web oficial recoge una &lt;a href=&#34;http://www.awstats.org/docs/awstats_compare.html&#34; target=&#34;_blank&#34;&gt;comparación&lt;/a&gt; entre algunas de las herramientas que existen.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Logs de acceso a websites en Amazon S3</title>
      <link>http://www.alejandrolopezparra.es/post/amazon_s3_logs/</link>
      <pubDate>Sat, 04 Mar 2017 15:39:03 +0100</pubDate>
      
      <guid>http://www.alejandrolopezparra.es/post/amazon_s3_logs/</guid>
      <description>

&lt;p&gt;Después del &lt;a href=&#34;http://www.alejandrolopezparra.es/post/amazon_s3/&#34;&gt;anterior post&lt;/a&gt; dedicado al alojamiento de websites estáticos en &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html&#34; target=&#34;_blank&#34;&gt;Amazon S3&lt;/a&gt;, es el momento de tratar la gestión de los logs o registros de acceso a nuestro website. Posteriormente nos centremos en el &lt;a href=&#34;http://www.alejandrolopezparra.es/post/awstats/&#34;&gt;análisis de logs&lt;/a&gt; que es fundamental para obtener estadísticas de nuestro website y conocer qué uso, tanto legítimo como inapropiado, se hace de él desde Internet.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Amazon S3&lt;/em&gt; dispone de una característica denominada &lt;a href=&#34;https://docs.aws.amazon.com/AmazonS3/latest/dev/ServerLogs.html&#34; target=&#34;_blank&#34;&gt;access logging&lt;/a&gt; que permite registrar los accesos que se producen a nuestro website en ficheros de logs. A continuación se describen los pasos para (1) habilitar, (2) purgar y (3) descargar dichos logs a un directorio local.&lt;/p&gt;

&lt;h2 id=&#34;1-activar-el-registro-de-accesos&#34;&gt;1. Activar el registro de accesos&lt;/h2&gt;

&lt;p&gt;El registro de accesos o access logging se habilita con unos &lt;a href=&#34;https://docs.aws.amazon.com/AmazonS3/latest/dev/enable-logging-console.html&#34; target=&#34;_blank&#34;&gt;sencillos pasos&lt;/a&gt;. De esta forma, con cada petición de acceso se genera un nuevo fichero que se almacena en el &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;Bucket&lt;/em&gt;&lt;/a&gt; que hayamos seleccionado para tal fin y que tendrá asociado un nombre único (por ejemplo, &lt;code&gt;mybucket&lt;/code&gt;). En dichos ficheros se registran los datos de los accesos (&lt;code&gt;requester&lt;/code&gt;, &lt;code&gt;bucket name&lt;/code&gt;, &lt;code&gt;request time&lt;/code&gt;, &lt;code&gt;request action&lt;/code&gt;, &lt;code&gt;response status&lt;/code&gt;, &lt;code&gt;error code&lt;/code&gt;) siguiendo el formato de log que se explica &lt;a href=&#34;https://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html&#34; target=&#34;_blank&#34;&gt;aquí&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;2-purgar-los-ficheros-de-logs&#34;&gt;2. Purgar los ficheros de logs&lt;/h2&gt;

&lt;p&gt;Es importante considerar que, con el paso del tiempo, el espacio ocupado por estos ficheros de logs irá creciendo. Esto puede llegar a ser un problema no sólo en lo que respecta al volumen sino también económicamente hablando, ya que también se paga por el espacio ocupado. Para evitar sorpresas, lo más recomendable es configurar el &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/user-guide/setup-lifecycle.html&#34; target=&#34;_blank&#34;&gt;ciclo de vida de objetos&lt;/a&gt; que posibilita, de forma automática, purgar ficheros o moverlos a &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/dev/storage-class-intro.html&#34; target=&#34;_blank&#34;&gt;otro almacenamiento&lt;/a&gt; más barato en base a su tiempo de vida.&lt;/p&gt;

&lt;h2 id=&#34;3-descargar-los-ficheros-de-logs&#34;&gt;3. Descargar los ficheros de logs&lt;/h2&gt;

&lt;p&gt;Para poder trabajar con los ficheros de logs generados, es necesario descargarlos previamente desde donde se encuentren. Esto se puede hacer de forma manual, que no es muy operativo, o automatizada. Para la segunda opción necesitaremos crear un usuario que nos permita usar la &lt;a href=&#34;http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html&#34; target=&#34;_blank&#34;&gt;Interfaz de Línea de Comandos (CLI)&lt;/a&gt; de &lt;em&gt;Amazon Web Services (AWS)&lt;/em&gt; contra la &lt;a href=&#34;http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html&#34; target=&#34;_blank&#34;&gt;Interfaz de Programación de Aplicaciones (API)&lt;/a&gt; de &lt;em&gt;Amazon S3&lt;/em&gt;. Los pasos para poder llevarlo a cabo son los siguientes:&lt;/p&gt;

&lt;h3 id=&#34;3-1-crear-un-usuario-con-permisos-de-lectura&#34;&gt;3.1. Crear un usuario con permisos de lectura&lt;/h3&gt;

&lt;p&gt;Antes de poder usar la CLI de AWS contra la API de S3 es indispensable crear un usuario que tenga los permisos suficientes. Esta tarea se realiza a través del &lt;a href=&#34;http://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html?icmpid=docs_iam_console&#34; target=&#34;_blank&#34;&gt;servicio de gestión de acceso e identidad (IAM)&lt;/a&gt; de AWS:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Crear un grupo y asociarle la política de permisos de sólo lectura (&lt;code&gt;AmazonS3ReadOnlyAccess&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Crear un usuario con el tipo de acceso &lt;code&gt;Programmatic access&lt;/code&gt; y añadirlo al grupo anterior.&lt;/li&gt;
&lt;li&gt;Anotar el identificador de usuario (&lt;code&gt;Access key ID&lt;/code&gt;) y la contraseña (&lt;code&gt;Secret access key&lt;/code&gt;) del usuario generado ya que serán necesarios a continuación.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;3-2-descargar-los-logs-desde-amazon-s3&#34;&gt;3.2. Descargar los logs desde Amazon S3&lt;/h3&gt;

&lt;p&gt;Para poder descargar los logs en un directorio local (por ejemplo, &lt;code&gt;mylogs&lt;/code&gt;) usaremos la CLI de AWS que tiene &lt;a href=&#34;http://docs.aws.amazon.com/cli/latest/userguide/using-s3-commands.html&#34; target=&#34;_blank&#34;&gt;multitud de comandos&lt;/a&gt; que permiten automatizar muchas de las tareas. Para el caso de &lt;a href=&#34;https://es.wikipedia.org/wiki/MacOS&#34; target=&#34;_blank&#34;&gt;&lt;em&gt;macOS&lt;/em&gt;&lt;/a&gt;, nos bastará con seguir unos sencillos pasos:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Instalar la CLI de AWS siguiendo &lt;a href=&#34;http://docs.aws.amazon.com/cli/latest/userguide/installing.html&#34; target=&#34;_blank&#34;&gt;estas instrucciones&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Configurarla con el comando &lt;em&gt;configure&lt;/em&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# aws configure
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;Responder a las siguientes preguntas:

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AWS Access Key ID&lt;/code&gt;. El identificador de usuario.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AWS Secret Access Key&lt;/code&gt;. La contraseña del usuario.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Default region name&lt;/code&gt;. En mi caso, &lt;code&gt;eu-west-1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Default output format&lt;/code&gt;. En mi caso, &lt;code&gt;None&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Crear un directorio donde descargar los logs (por ejemplo, &lt;code&gt;mylogs&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Ejecutar el comando &lt;code&gt;sync&lt;/code&gt; para descargar los logs, siendo &lt;code&gt;mybucket&lt;/code&gt; el nombre del bucket donde están los logs:&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# aws s3 sync s3://mybucket/ mylogs/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Por último, será necesario juntar todos los ficheros descargados en uno sólo para facilitar el análisis de los datos. En &lt;em&gt;macOS&lt;/em&gt; se puede usar un comando como el siguiente:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$# cat mylogs/* &amp;gt; access.log
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;conclusiones&#34;&gt;Conclusiones&lt;/h2&gt;

&lt;p&gt;La función &lt;em&gt;access logging&lt;/em&gt; de &lt;em&gt;Amazon S3&lt;/em&gt; nos permite registrar cada acceso que se produzca a nuestro website con datos valiosos sobre los mismos como son el solicitante, la respuesta del servidor y los tiempos.&lt;/p&gt;

&lt;p&gt;Gracias al análisis de este tipo de información podremos encontrar errores, usos inapropiados, problemas de seguridad e incluso estadísticas sobre nuestros visitantes. Estas cuestiones son las que se abordarán en el siguiente &lt;a href=&#34;http://www.alejandrolopezparra.es/post/awstats/&#34;&gt;post&lt;/a&gt; junto con el uso de la herramienta &lt;a href=&#34;http://www.awstats.org&#34; target=&#34;_blank&#34;&gt;AWStats&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
